// To add Iron Router
// meteor add iron:router
/* 
Router.configure({
  layoutTemplate: 'layout',
  loadingTemplate: 'loading',
  waitOn: function() { return Meteor.subscribe('books'); },
});

Router.route('/', {name: 'booksList'});
Router.route('/curatedComments', {name: 'curatedCommentsList'});
*/

Router.configure({
  layoutTemplate: 'layout',
  loadingTemplate: 'loading'
});

// Not sure what the first argument to route function is for.
Router.route(
  '/', {
     path: '/',
     name: 'booksList',
     template: 'booksList',
     waitOn: function() {
       return Meteor.subscribe('books');
    }
});

/*
Router.route(
  'curatedComments', {
     path: '/curatedComments',
     name: 'curatedComments',
     template: 'curatedCommentsList',
     waitOn: function() {
       return Meteor.subscribe('curatedComments');
    }
});
*/

// -----------------------------------------------------------------------------
// The special :_id syntax tells the router two things: first, to match any route
// of the form /posts/xyz/, where “xyz” can be anything at all. Second, to put
// whatever it finds in this “xyz” spot inside an _id property in the router's
// params array.
// -----------------------------------------------------------------------------
Router.route(
  '/curatedComments/:_id', {
     name: 'curatedComments',
     template: 'curatedCommentsList',
     waitOn: function() {
       return Meteor.subscribe('curatedComments');
    },
    // This returns this.params._id which is the id of the current book
    // to the template 'curatedCommentsList'.
    data: function() { return {book_id: this.params._id}; }
    //data: function() { return CuratedComments.findOne({book_id: this.params._id}); }
});
/*
Router.route('/books/:_id', {
  name: 'bookPage',
  data: function() { return Books.findOne(this.params._id); }
});
*/